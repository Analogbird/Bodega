<div align="center" style="margin:30px 0 40px">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIkAAACJCAYAAAAYJBvJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3RkJEOUY0NDFEQUMxMUU0QTZCRkJCQUJEQUNFQTQwMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3RkJEOUY0NTFEQUMxMUU0QTZCRkJCQUJEQUNFQTQwMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjdGQkQ5RjQyMURBQzExRTRBNkJGQkJBQkRBQ0VBNDAwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjdGQkQ5RjQzMURBQzExRTRBNkJGQkJBQkRBQ0VBNDAwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8zZx8gAAD79JREFUeNrsXQmQ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"/>
</div>


Bodega
===============
```
/bəˈdeɪgə/
	
	noun: bodega; plural noun: bodegas
	A cellar or shop selling wine and food,
	especially in a Spanish-speaking country or area.
```


[![Dependencies](https://david-dm.org/aichholzer/bodega.png)](https://david-dm.org/aichholzer/bodega)

[![NPM](https://nodei.co/npm/bodega.png?downloads=true&stars=true)](https://nodei.co/npm/bodega/)

[![NPM](https://nodei.co/npm-dl/bodega.png)](https://nodei.co/npm/bodega/)

A simple wrapper for [node-postgres](https://github.com/brianc/node-postgres) to make your life even easier. You do not need to worry about which connection to use, about pooling or about returning a client/connection to the pool after using it.

There is no need to additionally install `node-postgres`. Bodega will take care of it. If you need more information/details on the actual `node-postgres` module, take a look at [its own repository](https://github.com/brianc/node-postgres).


#### Super simple usage:

Install your `bodega`:

```
npm install bodega
```

Require your `bodega` and open it:

```
var bodega = require('bodega').open(config);
```

The `config` object requires these properties:

* `user` - Your DB `username` (*string*).
* `password` - Your DB `password` (*string*).
* `database` - The `database` you are trying to connect to (*string*).

Optional properties:

* `host` - The `host` where your DB is to be found. (*string*, default: `localhost`).
* `port` - The `port` on which your DB is listening. (*int*, default: `5432`).
* `ssl` - Whether to use an SSL connection or not. (*boolean*, default: `false`). 



###### Below you will find some basic examples to illustrate the use of `bodega`



### <a id="select">SELECT</a>
```
var query = 'SELECT * FROM "Wine"';
bodega.do(query, function (err, data) {
	if (err) {
		throw err;
	}

	// Do something with your data
	return data;
});
```

##### Expected response
```
{
 "rows": [],
 "rowCount": int,
}
```


### <a id="insert">INSERT</a>
```
var query = 'INSERT INTO "Wine"("brand", "year") VALUES($1, $2) RETURNING id';
bodega.do(query, ['Quintanilla del Monte', '1980'], function (err, data) {
	if (err) {
		throw err;
	}

	// Do something with your data
	return data.id;
});
```

##### Expected response
```
{
 "rows": [
 		{ "id": int }
 	],
 "rowCount": int,
 "id": int
}
```

The `id` property is what's expected to be returned from the DB by using the `RETURNING` syntax. Furthemore -to keep things easy and comfortable; if `rows` contains only one object, then all of this object's properties will be mapped to the root, hence the presence of `id` at root level.


### <a id="insert-function">INSERT (Via a stored procedure)</a>
```
var query = 'SELECT "insertWine"($1, $2) AS "bottle"';
bodega.do(query, ['Tempranillo de la Torre', '1980'], function (err, data) {
	if (err) {
		throw err;
	}

	// Do something with your data
	return data.bottle;
});
```

##### Expected response
```
{
 "rows": [
 		{ "bottle": variable }
 	],
 "rowCount": int,
 "bottle": variable
}
```

In this case, the contents of the `bottle` property will depend on what the stored procedure decides to return. The rest is the same as described [above](#insert).


### <a id="delete">DELETE</a>
```
var query = 'DELETE FROM "Wine" WHERE "year" = $1';
bodega.do(query, ['1980'], function (err, data) {
	if (err) {
		throw err;
	}

	// Do something with your data
	return data.rowCount;
});
```

##### Expected response
```
{
 "rows": [],
 "rowCount": int
}
```

The `rowCount` property will hold the number of deleted rows.






